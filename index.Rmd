---
title: "A3: SPL Library Checkouts"
author: "Veronica Fula"
date: "02/24/2023"
output: html_document
---

```{r setup, include=FALSE}
# chooseCRANmirror(graphics = FALSE, ind = 1)
knitr::opts_chunk$set(echo = FALSE, message = FALSE)

# load necessary ALL libraries
library("dplyr")
library("ggplot2")
library("scales")
library("knitr")
library("stringr")
library("plotly")

# load library dataframe into variable `spl_data` and add Date object as another column
spl_data <- read.csv("2013-2023-5-Checkouts-SPL.csv", stringsAsFactors = FALSE)

spl_data <- spl_data %>% 
  mutate(date = paste0(CheckoutYear, "-", CheckoutMonth, "-01"))

spl_data$date <- as.Date(spl_data$date, format = "%Y-%m-%d")

spl_data$Title <- tolower(spl_data$Title)
spl_data$Subjects <- tolower(spl_data$Subjects)

# source R files
source('summary.R')
```

### Introduction

I chose to use "Dataset with items checked out at least 5 times a month from 2013-2023" from the Seattle Public Library. I chose this +1 GB dataset because of the time frame it covers; it starts in 2013, which gave me the idea to analyze media from the "Pacific Rim" franchise since the first movie came out in 2013. 
Pacific Rim is one of my favorite franchises, and as it nears its 10-year anniversary, I thought this is a cool opportunity to see how checkouts have changed over time. 
I also thought it would be interesting to analyze since, along side the movies, comic books, novelizations, and art books came out and I wonder how many checkouts they get in comparison to the movies. (A TV series came out during 2021, but it's on Netflix so I don't think there are DVDs of it, only a companion comic book from 2022. I could look at this since it could be an indicator of the popularity of the series but I don't know if the library even has this pretty recent book.)
Also, I'm curious about how the second movie affected everything; I didn't actually see the two movies until 2020, but I heard the second movie got a lot of hype before it came out in 2018, but then people were mad about a character death and leaked it to others, which affected how many people went to see the movie. I'm wondering if this is true or not since. Maybe this is reflected in library checkouts somehow.

### Summary Information

The max amount of checkouts in a month for Pacific Rim media was on **`r summary$max_checkout_date`**. 
On this date, the amount of checkouts was: **`r summary$max_checkout`** for a piece of media called: **`r summary$max_checkout_name`**. 
The media type was: **`r summary$max_checkout_type`**

The min amount of checkouts in a month for Pacific Rim media was on **`r summary$min_checkout_date`**. 
On this date, the amount of checkouts was: **`r summary$min_checkout`** for a piece of media called: **`r summary$min_checkout_name`**. 
The media type was: **`r summary$min_checkout_type`**

The most recent date that Pacific Rim media was checked out was: **`r summary$most_recent_checkout_date`**. 
The name of the media checked out was: **`r summary$most_recent_checkout_name`**

The number of unique material types for Pacific Rim media is: **`r summary$unique_mat_types`**. (Turns out SPL doesn't have the Pacific Rim comic books, only the art book for the first movie.)

### The Dataset

The dataset was collected by the Seattle Public Library, and was published by the Seattle Open Data program (run by the City of Seattle, they publish data from the city's departments).
The parameters of the data are dates (month and year), number of checkouts within checkout month, whether it's physical or digital, the material type of the item, title, ISBN number, author of the item, publisher, publication year, vendor tool used to check out the item, and the subjects of the item (basically all the content tags it has).
The data was generated by the Seattle Public Library, with checkouts starting in April 2005. They update and aggregate the data each month around the 6th day. The City of Seattle started the Open Data Program to increase quality of life of residents and increase transparency, and to promote research.
Some ethical considerations is why you are working with this data in the first place. Are you trying to enact some sort of change in the behavior of people towards media they checkout? Are you going to make fun of people's choices? Make sure to not misrepresent certain pieces of media, or blame societal problems on them when checkouts are merely a reflection of societal trends (for example: don't blame violence on video games or video game books.)
Some limitations of the dataset are that it does not keep track demographic data like age or gender, so I cannot see if certain books are favored by certain groups. This is probably to privacy reasons, but it does mean that there is less context for me to see how these items' popularity affects society. I can only infer or assume to whom these items are important; I can see that a book tagged as Young Adult is popular, but I can't see if teens are the ones that are actually interested in it, and not like, middle schoolers or nostalgic adults. 
Another limitation is that different editions of items often get different titles or different publishers even though they are the same thing. I had difficulty getting Pacific Rim items since they capitalize things differently, the publishers are different for the art book and the movies, and they are even tagged differently.
Another issue that isn't really the dataset's fault is that streaming will probably skew the videodisc checkout rate in some way, and probably not equally among different movies. Some movies may seem like they are low-checkout, but in reality they are being watched a lot on some streaming platform.

### First Trends Over Time Chart

```{r echo=FALSE, warning=FALSE, message=FALSE}
source('chart1_pacrim.R')
pacrim_checkout_graph
```

This chart shows the 4 different items related to Pacific Rim that were checked out over nearly 10 years. Two of them are the videodiscs for the movies. One of them is the only book, the art book for the first movie. There was an artbook for the second movie, and around 5 or 6 comic books, one or two prequel novels and two novelizations, but SPL doesn't seem to have them or they are not checked out often (I filtered the dataset for many tags and title names). There is a soundisc for a soundtrack, but it doesn't appear since it was only checked out more than 5 times in July of 2018. 
The second movie (Pacific Rim: Uprising) appears to be a lot more popular than I originally thought (though it didn't reach the checkout heights of the first movie), and it seems it was more checked out than even the first movie when it came out in March of 2018 (though the first movie also got a small boost). The first movie was over 100 checkouts per month for almost 2 years; the second movie was over 100 checkouts per month for around 7 months. 
Both movies got a small boost in early 2020, which could be due to the beginning of COVID lockdown.
While Pacific Rim seems to have stopped being checked out around the end of 2020, Pacific Rim: Uprising still gets a constant amount of views to this day.

### Second Trends Over Time Chart

```{r echo=FALSE, warning=FALSE, message=FALSE}
source('chart2_legendary.R')
legendary_checkout_graph
```

This chart shows 9 Legendary Pictures films checkouts over time. Legendary Pictures is one of the companies that produced the Pacific Rim films, so I was curious as to how the popularity of different movies compared to these films.
There were several dozen films that Legendary Pictures produced or was associated with and ggplot only shows 9 movies, so I chose films that I had already watched and are kind of similar to Pacific Rim (sci-fi or have weird creatures or lots of special effects).
The top 5 movies with the highest checkout peaks are Interstellar, Jurassic World, Jurassic World: Fallen Kingdom, Pacific Rim, Godzilla: King of the Monsters.
It was pretty surprising that Interstellar was the most checked out - I knew it was popular, but I didn't think it would be this much! I thought Inception would get more, since from what I've seen on the internet, it was more of a meme. This could show that internet notoriety is different from library notoriety. Maybe different demographic groups use the library more?
What's interesting about this is that the Jurassic World series got three movies, and Legendary Pictures produced 3 Godzilla movies (one is not shown here), but the Pacific Rim series only ever got 2 (and the second one ended on a cliffhanger) - even though here we can see the Godzilla movies are less popular than the Pacific Rim films! From the trends seen here, it seems like Pacific Rim is a franchise that is due for another movie.

### Your Choice

```{r echo=FALSE, warning=FALSE, message=FALSE}
source('chart3_stacked_pacrim.R')
stacked_checkout_graph
```

I decided to investigate more into the popularity of notorious Legendary Picture films, so I made a stacked bar chart of checkouts for every year. This makes it easier to see how popular movies are when compared to each other, and I can check more easily if they are still popular today. Interstellar seems to have maintained a steady stream of checkouts even to this day, especially impressive for it being one of the oldest movies in the chart. Same with Inception, except it seems to have stopped in 2022. The Godzilla movies are the second most popular in 2022, with the most popular being Warcraft, which is unusual because the movie came out in 2016, stopped being watched in 2020-2021, then got a huge boost in 2022, and is now the most taken out Legendary movie. This may be due to it being more well-known in China, and only now is becoming popular in the US. Or maybe it's available on a popular streaming platform here.
The Pacific Rim films were a big chunk of some of the years, but they are the smallest chunk in 2022. So maybe they aren't as popular now as they once were, and in combination with COVID they weren't the top priority when other movies came out and became more popular. Maybe that explains why no new movies have come out, though that's not accounting for views on streaming platforms; who knows what that data might say.
